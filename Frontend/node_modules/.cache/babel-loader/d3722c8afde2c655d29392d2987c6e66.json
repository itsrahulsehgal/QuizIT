{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport { AUTH_ERROR, LOGIN_FAIL, LOGIN_SUCCESS, REGISTER_FAIL, REGISTER_SUCCESS, USER_LOADED, LOGOUT, GOOGLEAUTH, AUTH_RESET, CREATE_CLASS, JOIN_CLASS, LEAVE_CLASS, USER_ERROR } from '../actions/actionTypes';\nconst initialState = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: null,\n  loading: false,\n  classes: [],\n  user: null\n};\n\n// switch case block and then returning data acc to the action type\nexport default function AuthReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS:\n      {\n        const decoded = jwtDecode(action.payload.token);\n        localStorage.setItem('userDet', JSON.stringify(decoded));\n        localStorage.setItem('token', action.payload.token);\n        return {\n          ...state,\n          ...action.payload,\n          isAuthenticated: true,\n          loading: true\n        };\n      }\n    case GOOGLEAUTH:\n      {\n        return state;\n      }\n    case USER_ERROR:\n      return {\n        ...state,\n        loading: false\n      };\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT:\n      {\n        localStorage.removeItem('userDet');\n        localStorage.removeItem('token');\n        return {\n          ...state,\n          token: null,\n          isAuthenticated: false,\n          loading: false\n        };\n      }\n    case USER_LOADED:\n      {\n        return {\n          ...state,\n          isAuthenticated: true,\n          user: action.payload.user,\n          classes: action.payload.classes,\n          loading: false\n        };\n      }\n    case CREATE_CLASS:\n    case JOIN_CLASS:\n      {\n        return {\n          ...state,\n          classes: [...state.classes, action.payload],\n          loading: false\n        };\n      }\n    case LEAVE_CLASS:\n      {\n        return {\n          ...state,\n          classes: state.classes.filter(classroom => classroom.code !== action.payload),\n          loading: false\n        };\n      }\n    case AUTH_RESET:\n      {\n        return {\n          ...state,\n          loading: true\n        };\n      }\n    default:\n      {\n        return state;\n      }\n  }\n}\n_c = AuthReducer;\nvar _c;\n$RefreshReg$(_c, \"AuthReducer\");","map":{"version":3,"names":["jwtDecode","AUTH_ERROR","LOGIN_FAIL","LOGIN_SUCCESS","REGISTER_FAIL","REGISTER_SUCCESS","USER_LOADED","LOGOUT","GOOGLEAUTH","AUTH_RESET","CREATE_CLASS","JOIN_CLASS","LEAVE_CLASS","USER_ERROR","initialState","token","localStorage","getItem","isAuthenticated","loading","classes","user","AuthReducer","state","arguments","length","undefined","action","type","decoded","payload","setItem","JSON","stringify","removeItem","filter","classroom","code","_c","$RefreshReg$"],"sources":["/home/rahul/Desktop/client/src/reducers/auth.js"],"sourcesContent":["import jwtDecode from 'jwt-decode';\nimport {\n  AUTH_ERROR,\n  LOGIN_FAIL,\n  LOGIN_SUCCESS,\n  REGISTER_FAIL,\n  REGISTER_SUCCESS,\n  USER_LOADED,\n  LOGOUT,\n  GOOGLEAUTH,\n  AUTH_RESET,\n  CREATE_CLASS,\n  JOIN_CLASS,\n  LEAVE_CLASS,\n  USER_ERROR\n} from '../actions/actionTypes';\n\nconst initialState = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: null,\n  loading: false,\n  classes: [],\n  user: null\n};\n\n// switch case block and then returning data acc to the action type\nexport default function AuthReducer(state = initialState, action) {\n  switch (action.type) {\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS: {\n      const decoded = jwtDecode(action.payload.token);\n      localStorage.setItem('userDet', JSON.stringify(decoded));\n      localStorage.setItem('token', action.payload.token);\n      return {\n        ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        loading: true\n      };\n    }\n    case GOOGLEAUTH: {\n      return state;\n    }\n    case USER_ERROR:\n      return {\n        ...state,\n        loading: false\n      };\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT: {\n      localStorage.removeItem('userDet');\n      localStorage.removeItem('token');\n      return {\n        ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false\n      };\n    }\n    case USER_LOADED: {\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        classes: action.payload.classes,\n        loading: false\n      };\n    }\n    case CREATE_CLASS:\n    case JOIN_CLASS: {\n      return {\n        ...state,\n        classes: [...state.classes, action.payload],\n        loading: false\n      };\n    }\n    case LEAVE_CLASS: {\n      return {\n        ...state,\n        classes: state.classes.filter((classroom) => classroom.code !== action.payload),\n        loading: false\n      };\n    }\n\n    case AUTH_RESET: {\n      return {\n        ...state,\n        loading: true\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}