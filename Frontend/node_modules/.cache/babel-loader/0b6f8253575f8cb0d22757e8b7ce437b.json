{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport { AUTH_ERROR, LOGIN_FAIL, LOGIN_SUCCESS, REGISTER_FAIL, REGISTER_SUCCESS, USER_LOADED, LOGOUT, GOOGLEAUTH, AUTH_RESET, CREATE_CLASS, JOIN_CLASS, LEAVE_CLASS, USER_ERROR } from '../actions/actionTypes';\nconst initialState = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: null,\n  loading: false,\n  classes: [],\n  user: null\n}; // switch case block and then returning data acc to the action type\n\nexport default function AuthReducer(state = initialState, action) {\n  switch (action.type) {\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS:\n      {\n        const decoded = jwtDecode(action.payload.token);\n        localStorage.setItem('userDet', JSON.stringify(decoded));\n        localStorage.setItem('token', action.payload.token);\n        return { ...state,\n          ...action.payload,\n          isAuthenticated: true,\n          loading: true\n        };\n      }\n\n    case GOOGLEAUTH:\n      {\n        return state;\n      }\n\n    case USER_ERROR:\n      return { ...state,\n        loading: false\n      };\n\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT:\n      {\n        localStorage.removeItem('userDet');\n        localStorage.removeItem('token');\n        return { ...state,\n          token: null,\n          isAuthenticated: false,\n          loading: false\n        };\n      }\n\n    case USER_LOADED:\n      {\n        return { ...state,\n          isAuthenticated: true,\n          user: action.payload.user,\n          classes: action.payload.classes,\n          loading: false\n        };\n      }\n\n    case CREATE_CLASS:\n    case JOIN_CLASS:\n      {\n        return { ...state,\n          classes: [...state.classes, action.payload],\n          loading: false\n        };\n      }\n\n    case LEAVE_CLASS:\n      {\n        return { ...state,\n          classes: state.classes.filter(classroom => classroom.code !== action.payload),\n          loading: false\n        };\n      }\n\n    case AUTH_RESET:\n      {\n        return { ...state,\n          loading: true\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n_c = AuthReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthReducer\");","map":{"version":3,"sources":["/home/rahul/Desktop/Manthan/client/src/reducers/auth.js"],"names":["jwtDecode","AUTH_ERROR","LOGIN_FAIL","LOGIN_SUCCESS","REGISTER_FAIL","REGISTER_SUCCESS","USER_LOADED","LOGOUT","GOOGLEAUTH","AUTH_RESET","CREATE_CLASS","JOIN_CLASS","LEAVE_CLASS","USER_ERROR","initialState","token","localStorage","getItem","isAuthenticated","loading","classes","user","AuthReducer","state","action","type","decoded","payload","setItem","JSON","stringify","removeItem","filter","classroom","code"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SACEC,UADF,EAEEC,UAFF,EAGEC,aAHF,EAIEC,aAJF,EAKEC,gBALF,EAMEC,WANF,EAOEC,MAPF,EAQEC,UARF,EASEC,UATF,EAUEC,YAVF,EAWEC,UAXF,EAYEC,WAZF,EAaEC,UAbF,QAcO,wBAdP;AAgBA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADY;AAEnBC,EAAAA,eAAe,EAAE,IAFE;AAGnBC,EAAAA,OAAO,EAAE,KAHU;AAInBC,EAAAA,OAAO,EAAE,EAJU;AAKnBC,EAAAA,IAAI,EAAE;AALa,CAArB,C,CAQA;;AACA,eAAe,SAASC,WAAT,CAAqBC,KAAK,GAAGT,YAA7B,EAA2CU,MAA3C,EAAmD;AAChE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKpB,gBAAL;AACA,SAAKF,aAAL;AAAoB;AAClB,cAAMuB,OAAO,GAAG1B,SAAS,CAACwB,MAAM,CAACG,OAAP,CAAeZ,KAAhB,CAAzB;AACAC,QAAAA,YAAY,CAACY,OAAb,CAAqB,SAArB,EAAgCC,IAAI,CAACC,SAAL,CAAeJ,OAAf,CAAhC;AACAV,QAAAA,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8BJ,MAAM,CAACG,OAAP,CAAeZ,KAA7C;AACA,eAAO,EACL,GAAGQ,KADE;AAEL,aAAGC,MAAM,CAACG,OAFL;AAGLT,UAAAA,eAAe,EAAE,IAHZ;AAILC,UAAAA,OAAO,EAAE;AAJJ,SAAP;AAMD;;AACD,SAAKX,UAAL;AAAiB;AACf,eAAOe,KAAP;AACD;;AACD,SAAKV,UAAL;AACE,aAAO,EACL,GAAGU,KADE;AAELJ,QAAAA,OAAO,EAAE;AAFJ,OAAP;;AAIF,SAAKf,aAAL;AACA,SAAKH,UAAL;AACA,SAAKC,UAAL;AACA,SAAKK,MAAL;AAAa;AACXS,QAAAA,YAAY,CAACe,UAAb,CAAwB,SAAxB;AACAf,QAAAA,YAAY,CAACe,UAAb,CAAwB,OAAxB;AACA,eAAO,EACL,GAAGR,KADE;AAELR,UAAAA,KAAK,EAAE,IAFF;AAGLG,UAAAA,eAAe,EAAE,KAHZ;AAILC,UAAAA,OAAO,EAAE;AAJJ,SAAP;AAMD;;AACD,SAAKb,WAAL;AAAkB;AAChB,eAAO,EACL,GAAGiB,KADE;AAELL,UAAAA,eAAe,EAAE,IAFZ;AAGLG,UAAAA,IAAI,EAAEG,MAAM,CAACG,OAAP,CAAeN,IAHhB;AAILD,UAAAA,OAAO,EAAEI,MAAM,CAACG,OAAP,CAAeP,OAJnB;AAKLD,UAAAA,OAAO,EAAE;AALJ,SAAP;AAOD;;AACD,SAAKT,YAAL;AACA,SAAKC,UAAL;AAAiB;AACf,eAAO,EACL,GAAGY,KADE;AAELH,UAAAA,OAAO,EAAE,CAAC,GAAGG,KAAK,CAACH,OAAV,EAAmBI,MAAM,CAACG,OAA1B,CAFJ;AAGLR,UAAAA,OAAO,EAAE;AAHJ,SAAP;AAKD;;AACD,SAAKP,WAAL;AAAkB;AAChB,eAAO,EACL,GAAGW,KADE;AAELH,UAAAA,OAAO,EAAEG,KAAK,CAACH,OAAN,CAAcY,MAAd,CAAsBC,SAAD,IAAeA,SAAS,CAACC,IAAV,KAAmBV,MAAM,CAACG,OAA9D,CAFJ;AAGLR,UAAAA,OAAO,EAAE;AAHJ,SAAP;AAKD;;AAED,SAAKV,UAAL;AAAiB;AACf,eAAO,EACL,GAAGc,KADE;AAELJ,UAAAA,OAAO,EAAE;AAFJ,SAAP;AAID;;AACD;AAAS;AACP,eAAOI,KAAP;AACD;AAnEH;AAqED;KAtEuBD,W","sourcesContent":["import jwtDecode from 'jwt-decode';\nimport {\n  AUTH_ERROR,\n  LOGIN_FAIL,\n  LOGIN_SUCCESS,\n  REGISTER_FAIL,\n  REGISTER_SUCCESS,\n  USER_LOADED,\n  LOGOUT,\n  GOOGLEAUTH,\n  AUTH_RESET,\n  CREATE_CLASS,\n  JOIN_CLASS,\n  LEAVE_CLASS,\n  USER_ERROR\n} from '../actions/actionTypes';\n\nconst initialState = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: null,\n  loading: false,\n  classes: [],\n  user: null\n};\n\n// switch case block and then returning data acc to the action type\nexport default function AuthReducer(state = initialState, action) {\n  switch (action.type) {\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS: {\n      const decoded = jwtDecode(action.payload.token);\n      localStorage.setItem('userDet', JSON.stringify(decoded));\n      localStorage.setItem('token', action.payload.token);\n      return {\n        ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        loading: true\n      };\n    }\n    case GOOGLEAUTH: {\n      return state;\n    }\n    case USER_ERROR:\n      return {\n        ...state,\n        loading: false\n      };\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT: {\n      localStorage.removeItem('userDet');\n      localStorage.removeItem('token');\n      return {\n        ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false\n      };\n    }\n    case USER_LOADED: {\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        classes: action.payload.classes,\n        loading: false\n      };\n    }\n    case CREATE_CLASS:\n    case JOIN_CLASS: {\n      return {\n        ...state,\n        classes: [...state.classes, action.payload],\n        loading: false\n      };\n    }\n    case LEAVE_CLASS: {\n      return {\n        ...state,\n        classes: state.classes.filter((classroom) => classroom.code !== action.payload),\n        loading: false\n      };\n    }\n\n    case AUTH_RESET: {\n      return {\n        ...state,\n        loading: true\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}